<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SpaceBTI</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
    <script>
        Kakao.init('5a0ceb9e10878825aea4875de3a5a176');
        Kakao.isInitialized();
    </script>
</head>
<body class="container">
    <div style = "text-align :center;">
        <img id="logo" src="img/logo.png">
        <hr>
    </div>
    <article class="start">
        <h1 class="text-center"> 나와 어울리는 놀이기구는? <img src="img/main.png"></h1>
        <br><br><br>
        <button id="startBtn" type="button" class="btn btn-warning btn-lg mt-5" style="background-color: #FF6E3B; color: white;"onclick="start();">시작하기</button>
    </article>
    <article class="question">
        <div id="pgrNum">1/9</div>
        <div class="progress">
            <div class="progress-bar progress-bar-striped progress-bar-animated bg-warning mt-100" role="progressbar" style="width: calc(100/3*1%)"></div>
        </div>
        <div class="explain">
            <h2 id="title" class="text-center mt-5 mb-5" style="font-size: 20px;">문제</h2>
        </div>
        <input id="type" type="hidden" value="AN">
        <button id="A" type="button" class="btn btn-outline-warning btn-lg mt-3" style="font-size: 16px">Info</button>
        <button id="B" type="button" class="btn btn-outline-warning btn-lg mt-3" style="font-size: 16px">Info</button>
    </article>
    <article class="result">
        <img id="img" src="neptune.png">
        <p id="ride" class="text-center mt-5" style="font-size: 30px">놀이기구 이름</p>
        <div class="border border-warning">
            <p id="explain" class="text-center p-2" style="font-size: 18px">설명</p>
        </div>
        <div class="resultBtn">
            <button type="button" id="replay" class="btn btn-warning" onclick="window.location.reload();">다시하기</button><br>
            <button type="button" id="copy" class="btn btn-warning mt-2" role="alert" onclick="copy()">링크복사</button>
            <a id="kakaotalk-sharing-btn" href="javascript:shareMessage()"><button type="button" id="share" class="btn btn-warning mt-2"  >공유하기</button></a>
        </div>
        <p class="maker">Developer 김지원, 이서연</p>
    </article>

    <input type="hidden" id="AN" value="0">
    <input type="hidden" id="SN" value="0">
    <input type="hidden" id="EN" value="0">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
    <script>
        var num =1;
        var q = {
            1: {"title": "전자레인지에 불닭볶음면을 넣고 3분을 돌린 당신.", "type": "AN", "A": "A", "B": "B"},
            2: {"title": "수업이 끝났다. 친구는 한시간 후에 끝난다. 배가 꼬르륵 거린다.", "type": "SN", "A": "A", "B": "B"}, 
            3: {"title": "지금 무슨노래 듣고계세요?", "type": "EN", "A": "A", "B": "B"}, 
        }
        var result = {
            "ASE":{"ride": "범퍼카", "explain": "범퍼카 설명들어가야 됨", "img":"img/bumper-car.png"},
            "ASN":{"ride": "디스코 팡팡", "explain": "디스코 팡팡 설명들어가야 됨", "img":"img/logo.png"},
            "ANN":{"ride": "사파리", "explain": "사파리 설명들어가야 됨", "img":"img/safari.png"},
            "NSE":{"ride": "롤러코스터", "explain": "롤러코스터 설명들어가야 됨", "img":"img/roller-coaster.png"},
            "NSN":{"ride": "바이킹", "explain": "바이킹 설명들어가야 됨", "img":"img/ship.png"},
            "NNE":{"ride": "회전목마", "explain": "회전목마 설명들어가야 됨", "img":"img/carousel.png"},
            "NNN":{"ride": "관람차", "explain": "관람차 설명들어가야 됨", "img":"img/ferris-wheel.png"},
        }

        function start() {
            $(".start").hide();
            $(".question").show();
            next();
        }
        $("#A").click(function(){
            var type=$("#type").val();
            var preValue =$("#"+type).val();
            $("#"+type).val(parseInt(preValue)+1);
            console.log($("#"+type).val(parseInt(preValue)+1));
            next();
        });
        $("#B").click(function(){
            next();
        });
        function next(){
            if(num==4){
                $(".question").hide();
                $(".result").show();
                var mbti="";
                ($("#AN").val()<1) ? mbti+="N" : mbti+="A";
                ($("#SN").val()<1) ? mbti+="N" : mbti+="S";
                ($("#EN").val()<1) ? mbti+="N" : mbti+="E";
                $("#img").attr("src",result[mbti]["img"]);
                $("#ride").html(result[mbti]["ride"]);
                $("#explain").html(result[mbti]["explain"]);
            }
            else{
                $(".progress-bar").attr('style',' width: calc(100/3*'+num+'%)');
                $("#pgrNum").html(num+'/3');
                $("#title").html(q[num]["title"]);
                $("#type").val(q[num]["type"]);
                $("#A").html(q[num]["A"]);
                $("#B").html(q[num]["B"]);
                num++;
            }
        }
        function copy(){
            var url = '';
            var textarea = document.createElement("textarea");
            document.body.appendChild(textarea);
            url = window.document.location.href;
            textarea.value = url;
            textarea.select();
            document.execCommand("copy");
            document.body.removeChild(textarea);
            alert("링크가 복사되었습니다.")
            }
        </script>

        <script src="https://t1.kakaocdn.net/kakao_js_sdk/2.1.0/kakao.min.js"
        integrity="sha384-dpu02ieKC6NUeKFoGMOKz6102CLEWi9+5RQjWSV0ikYSFFd8M3Wp2reIcquJOemx" crossorigin="anonymous">
        </script>
        <script>
            Kakao.init('	be75fd6e35075efca758e4a3f04a7479'); // 사용하려는 앱의 JavaScript 키 입력
        </script>
    
        
    
    <script>
        function shareMessage() {
          Kakao.Share.sendScrap({
            requestUrl: 'https://session4-mbti.netlify.app/',
          });
        }
    </script>
 
</body>
</html>